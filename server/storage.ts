import { 
  users, 
  categories, 
  articles, 
  breakingNews,
  type User, 
  type InsertUser,
  type Category,
  type InsertCategory,
  type Article,
  type InsertArticle,
  type BreakingNews,
  type InsertBreakingNews
} from "@shared/schema";

export interface IStorage {
  getUser(id: number): Promise<User | undefined>;
  getUserByUsername(username: string): Promise<User | undefined>;
  createUser(user: InsertUser): Promise<User>;
  
  getCategories(): Promise<Category[]>;
  createCategory(category: InsertCategory): Promise<Category>;
  
  getArticles(limit?: number, offset?: number, categoryId?: number): Promise<Article[]>;
  getArticleById(id: number): Promise<Article | undefined>;
  getTrendingArticles(limit?: number): Promise<Article[]>;
  createArticle(article: InsertArticle): Promise<Article>;
  
  getBreakingNews(): Promise<BreakingNews[]>;
  createBreakingNews(news: InsertBreakingNews): Promise<BreakingNews>;
}

export class MemStorage implements IStorage {
  private users: Map<number, User>;
  private categories: Map<number, Category>;
  private articles: Map<number, Article>;
  private breakingNewsItems: Map<number, BreakingNews>;
  private currentUserId: number;
  private currentCategoryId: number;
  private currentArticleId: number;
  private currentBreakingNewsId: number;

  constructor() {
    this.users = new Map();
    this.categories = new Map();
    this.articles = new Map();
    this.breakingNewsItems = new Map();
    this.currentUserId = 1;
    this.currentCategoryId = 1;
    this.currentArticleId = 1;
    this.currentBreakingNewsId = 1;
    
    this.seedData();
  }

  private seedData() {
    // Seed categories
    const categoriesData: InsertCategory[] = [
      { name: "Top News", nameHindi: "‡§ü‡•â‡§™ ‡§®‡•ç‡§Ø‡•Ç‡§ú‡§º", slug: "top-news", icon: "üì∞", color: "blue" },
      { name: "Local", nameHindi: "‡§∏‡•ç‡§•‡§æ‡§®‡•Ä‡§Ø", slug: "local", icon: "üè†", color: "green" },
      { name: "National", nameHindi: "‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Ø", slug: "national", icon: "üáÆüá≥", color: "orange" },
      { name: "Cricket", nameHindi: "‡§ï‡•ç‡§∞‡§ø‡§ï‡•á‡§ü", slug: "cricket", icon: "üèè", color: "red" },
      { name: "Business", nameHindi: "‡§µ‡•ç‡§Ø‡§æ‡§™‡§æ‡§∞", slug: "business", icon: "üíº", color: "purple" },
      { name: "Originals", nameHindi: "‡§ì‡§∞‡§ø‡§ú‡§ø‡§®‡§≤‡•ç‡§∏", slug: "originals", icon: "‚≠ê", color: "yellow" },
      { name: "International", nameHindi: "‡§Ö‡§Ç‡§§‡§∞‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Ø", slug: "international", icon: "üåç", color: "teal" },
      { name: "Tech & Science", nameHindi: "‡§§‡§ï‡§®‡•Ä‡§ï ‡§î‡§∞ ‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§®", slug: "tech-science", icon: "‚öõÔ∏è", color: "indigo" },
      { name: "Entertainment", nameHindi: "‡§Æ‡§®‡•ã‡§∞‡§Ç‡§ú‡§®", slug: "entertainment", icon: "üé¨", color: "pink" },
      { name: "Lifestyle", nameHindi: "‡§ú‡•Ä‡§µ‡§®‡§∂‡•à‡§≤‡•Ä", slug: "lifestyle", icon: "üíñ", color: "rose" },
      { name: "Sports", nameHindi: "‡§ñ‡•á‡§≤", slug: "sports", icon: "‚öΩ", color: "cyan" },
      { name: "Utility", nameHindi: "‡§â‡§™‡§Ø‡•ã‡§ó‡§ø‡§§‡§æ", slug: "utility", icon: "üîß", color: "gray" },
      { name: "Career", nameHindi: "‡§ï‡§∞‡§ø‡§Ø‡§∞", slug: "career", icon: "üèÜ", color: "emerald" }
    ];

    categoriesData.forEach(category => {
      const id = this.currentCategoryId++;
      this.categories.set(id, { ...category, id });
    });

    // Seed breaking news
    const breakingNewsData: InsertBreakingNews[] = [
      { 
        title: "PM announces major economic reforms", 
        titleHindi: "‡§Æ‡•Å‡§ñ‡•ç‡§Ø‡§Æ‡§Ç‡§§‡•ç‡§∞‡•Ä ‡§ï‡•Ä ‡§Ü‡§ú ‡§ï‡•Ä ‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§ò‡•ã‡§∑‡§£‡§æ", 
        isActive: true 
      },
      { 
        title: "Cricket team wins final match", 
        titleHindi: "‡§ï‡•ç‡§∞‡§ø‡§ï‡•á‡§ü ‡§ü‡•Ä‡§Æ ‡§®‡•á ‡§ú‡•Ä‡§§‡§æ ‡§´‡§æ‡§á‡§®‡§≤ ‡§Æ‡•à‡§ö", 
        isActive: true 
      },
      { 
        title: "Stock market continues bullish trend", 
        titleHindi: "‡§∂‡•á‡§Ø‡§∞ ‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§Æ‡•á‡§Ç ‡§§‡•á‡§ú‡•Ä ‡§ï‡§æ ‡§¶‡•å‡§∞ ‡§ú‡§æ‡§∞‡•Ä", 
        isActive: true 
      },
      { 
        title: "New policy benefits farmers", 
        titleHindi: "‡§®‡§à ‡§®‡•Ä‡§§‡§ø ‡§∏‡•á ‡§ï‡§ø‡§∏‡§æ‡§®‡•ã‡§Ç ‡§ï‡•ã ‡§Æ‡§ø‡§≤‡•á‡§ó‡§æ ‡§´‡§æ‡§Ø‡§¶‡§æ", 
        isActive: true 
      },
      { 
        title: "Weather department issues heavy rain warning", 
        titleHindi: "‡§Æ‡•å‡§∏‡§Æ ‡§µ‡§ø‡§≠‡§æ‡§ó ‡§ï‡•Ä ‡§ö‡•á‡§§‡§æ‡§µ‡§®‡•Ä ‡§Ü‡§ú ‡§∞‡§æ‡§§ ‡§¨‡§æ‡§∞‡§ø‡§∂ ‡§ï‡•Ä ‡§∏‡§Ç‡§≠‡§æ‡§µ‡§®‡§æ", 
        isActive: true 
      }
    ];

    breakingNewsData.forEach(news => {
      const id = this.currentBreakingNewsId++;
      this.breakingNewsItems.set(id, { ...news, id, createdAt: new Date() });
    });

    // Seed articles
    const articlesData: InsertArticle[] = [
      {
        title: "Parliament Winter Session: Important Bill Discussion Today",
        titleHindi: "‡§∏‡§Ç‡§∏‡§¶ ‡§ï‡•á ‡§∂‡•Ä‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§∏‡§§‡•ç‡§∞ ‡§Æ‡•á‡§Ç ‡§Ü‡§ú ‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§µ‡§ø‡§ß‡•á‡§Ø‡§ï ‡§™‡§∞ ‡§ö‡§∞‡•ç‡§ö‡§æ, ‡§µ‡§ø‡§™‡§ï‡•ç‡§∑ ‡§®‡•á ‡§ï‡•Ä ‡§Ö‡§™‡§®‡•Ä ‡§§‡•à‡§Ø‡§æ‡§∞‡•Ä",
        content: "New Delhi witnesses second day of Parliament winter session...",
        contentHindi: "‡§®‡§à ‡§¶‡§ø‡§≤‡•ç‡§≤‡•Ä ‡§Æ‡•á‡§Ç ‡§Ü‡§ú ‡§∏‡§Ç‡§∏‡§¶ ‡§ï‡•á ‡§∂‡•Ä‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§∏‡§§‡•ç‡§∞ ‡§ï‡§æ ‡§¶‡•Ç‡§∏‡§∞‡§æ ‡§¶‡§ø‡§® ‡§π‡•à‡•§ ‡§∏‡§∞‡§ï‡§æ‡§∞ ‡§Ü‡§ú ‡§è‡§ï ‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§µ‡§ø‡§ß‡•á‡§Ø‡§ï ‡§™‡§∞ ‡§ö‡§∞‡•ç‡§ö‡§æ ‡§ï‡§∞‡§æ‡§®‡•á ‡§ï‡•Ä ‡§§‡•à‡§Ø‡§æ‡§∞‡•Ä ‡§ï‡§∞ ‡§∞‡§π‡•Ä ‡§π‡•à‡•§",
        excerpt: "Parliament prepares for crucial bill discussion...",
        excerptHindi: "‡§®‡§à ‡§¶‡§ø‡§≤‡•ç‡§≤‡•Ä ‡§Æ‡•á‡§Ç ‡§Ü‡§ú ‡§∏‡§Ç‡§∏‡§¶ ‡§ï‡•á ‡§∂‡•Ä‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§∏‡§§‡•ç‡§∞ ‡§ï‡§æ ‡§¶‡•Ç‡§∏‡§∞‡§æ ‡§¶‡§ø‡§® ‡§π‡•à‡•§ ‡§∏‡§∞‡§ï‡§æ‡§∞ ‡§Ü‡§ú ‡§è‡§ï ‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§µ‡§ø‡§ß‡•á‡§Ø‡§ï ‡§™‡§∞ ‡§ö‡§∞‡•ç‡§ö‡§æ ‡§ï‡§∞‡§æ‡§®‡•á ‡§ï‡•Ä ‡§§‡•à‡§Ø‡§æ‡§∞‡•Ä ‡§ï‡§∞ ‡§∞‡§π‡•Ä ‡§π‡•à, ‡§ú‡§¨‡§ï‡§ø ‡§µ‡§ø‡§™‡§ï‡•ç‡§∑ ‡§®‡•á ‡§≠‡•Ä ‡§Ö‡§™‡§®‡•Ä ‡§∞‡§£‡§®‡•Ä‡§§‡§ø ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§ï‡•Ä ‡§π‡•à‡•§",
        imageUrl: "https://images.unsplash.com/photo-1555992336-03a23c37245f?ixlib=rb-4.0.3&auto=format&fit=crop&w=654&h=300",
        categoryId: 3,
        isBreaking: false,
        isTrending: true,
        publishedAt: new Date(Date.now() - 2 * 60 * 60 * 1000) // 2 hours ago
      },
      {
        title: "Rising Inflation Concerns Citizens",
        titleHindi: "‡§∂‡§π‡§∞ ‡§Æ‡•á‡§Ç ‡§¨‡§¢‡§º‡§§‡•Ä ‡§Æ‡§π‡§Ç‡§ó‡§æ‡§à ‡§∏‡•á ‡§™‡§∞‡•á‡§∂‡§æ‡§® ‡§≤‡•ã‡§ó, ‡§∏‡§¨‡•ç‡§ú‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§¶‡§æ‡§Æ ‡§Ü‡§∏‡§Æ‡§æ‡§® ‡§õ‡•Ç ‡§∞‡§π‡•á",
        content: "Local markets witness unprecedented price rise...",
        contentHindi: "‡§∏‡•ç‡§•‡§æ‡§®‡•Ä‡§Ø ‡§¨‡§æ‡§ú‡§æ‡§∞‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§∏‡§¨‡•ç‡§ú‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•Ä ‡§ï‡•Ä‡§Æ‡§§‡•á‡§Ç ‡§≤‡§ó‡§æ‡§§‡§æ‡§∞ ‡§¨‡§¢‡§º ‡§∞‡§π‡•Ä ‡§π‡•à‡§Ç‡•§ ‡§ü‡§Æ‡§æ‡§ü‡§∞, ‡§™‡•ç‡§Ø‡§æ‡§ú ‡§î‡§∞ ‡§Ö‡§®‡•ç‡§Ø ‡§ú‡§∞‡•Ç‡§∞‡•Ä ‡§∏‡§¨‡•ç‡§ú‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§¶‡§æ‡§Æ ‡§¶‡•ã‡§ó‡•Å‡§®‡•á ‡§π‡•ã ‡§ó‡§è ‡§π‡•à‡§Ç‡•§",
        excerpt: "Vegetable prices skyrocket in local markets...",
        excerptHindi: "‡§∏‡•ç‡§•‡§æ‡§®‡•Ä‡§Ø ‡§¨‡§æ‡§ú‡§æ‡§∞‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§∏‡§¨‡•ç‡§ú‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•Ä ‡§ï‡•Ä‡§Æ‡§§‡•á‡§Ç ‡§≤‡§ó‡§æ‡§§‡§æ‡§∞ ‡§¨‡§¢‡§º ‡§∞‡§π‡•Ä ‡§π‡•à‡§Ç‡•§ ‡§ü‡§Æ‡§æ‡§ü‡§∞, ‡§™‡•ç‡§Ø‡§æ‡§ú ‡§î‡§∞ ‡§Ö‡§®‡•ç‡§Ø ‡§ú‡§∞‡•Ç‡§∞‡•Ä ‡§∏‡§¨‡•ç‡§ú‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§¶‡§æ‡§Æ ‡§¶‡•ã‡§ó‡•Å‡§®‡•á ‡§π‡•ã ‡§ó‡§è ‡§π‡•à‡§Ç‡•§",
        imageUrl: "https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150",
        categoryId: 2,
        isBreaking: false,
        isTrending: false,
        publishedAt: new Date(Date.now() - 4 * 60 * 60 * 1000) // 4 hours ago
      },
      {
        title: "Indian Team Creates History with 3-0 Series Win",
        titleHindi: "‡§≠‡§æ‡§∞‡§§‡•Ä‡§Ø ‡§ü‡•Ä‡§Æ ‡§®‡•á ‡§∞‡§ö‡§æ ‡§á‡§§‡§ø‡§π‡§æ‡§∏, ‡§∏‡•Ä‡§∞‡•Ä‡§ú ‡§Æ‡•á‡§Ç 3-0 ‡§∏‡•á ‡§Æ‡§ø‡§≤‡•Ä ‡§ú‡•Ä‡§§",
        content: "Under captain Virat Kohli's brilliant leadership...",
        contentHindi: "‡§ï‡§™‡•ç‡§§‡§æ‡§® ‡§µ‡§ø‡§∞‡§æ‡§ü ‡§ï‡•ã‡§π‡§≤‡•Ä ‡§ï‡•Ä ‡§∂‡§æ‡§®‡§¶‡§æ‡§∞ ‡§ï‡§™‡•ç‡§§‡§æ‡§®‡•Ä ‡§Æ‡•á‡§Ç ‡§≠‡§æ‡§∞‡§§‡•Ä‡§Ø ‡§ï‡•ç‡§∞‡§ø‡§ï‡•á‡§ü ‡§ü‡•Ä‡§Æ ‡§®‡•á ‡§µ‡§ø‡§¶‡•á‡§∂‡•Ä ‡§ß‡§∞‡§§‡•Ä ‡§™‡§∞ ‡§ê‡§§‡§ø‡§π‡§æ‡§∏‡§ø‡§ï ‡§ú‡•Ä‡§§ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡•Ä ‡§π‡•à‡•§",
        excerpt: "Historic victory on foreign soil...",
        excerptHindi: "‡§ï‡§™‡•ç‡§§‡§æ‡§® ‡§µ‡§ø‡§∞‡§æ‡§ü ‡§ï‡•ã‡§π‡§≤‡•Ä ‡§ï‡•Ä ‡§∂‡§æ‡§®‡§¶‡§æ‡§∞ ‡§ï‡§™‡•ç‡§§‡§æ‡§®‡•Ä ‡§Æ‡•á‡§Ç ‡§≠‡§æ‡§∞‡§§‡•Ä‡§Ø ‡§ï‡•ç‡§∞‡§ø‡§ï‡•á‡§ü ‡§ü‡•Ä‡§Æ ‡§®‡•á ‡§µ‡§ø‡§¶‡•á‡§∂‡•Ä ‡§ß‡§∞‡§§‡•Ä ‡§™‡§∞ ‡§ê‡§§‡§ø‡§π‡§æ‡§∏‡§ø‡§ï ‡§ú‡•Ä‡§§ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡•Ä ‡§π‡•à‡•§",
        imageUrl: "https://images.unsplash.com/photo-1540747913346-19e32dc3e97e?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150",
        categoryId: 4,
        isBreaking: false,
        isTrending: true,
        publishedAt: new Date(Date.now() - 6 * 60 * 60 * 1000) // 6 hours ago
      },
      {
        title: "5G Technology Transforms Digital India",
        titleHindi: "‡§®‡§à 5G ‡§§‡§ï‡§®‡•Ä‡§ï ‡§∏‡•á ‡§¨‡§¶‡§≤‡•á‡§ó‡•Ä ‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§á‡§Ç‡§°‡§ø‡§Ø‡§æ ‡§ï‡•Ä ‡§§‡§∏‡•ç‡§µ‡•Ä‡§∞",
        content: "5G network expansion accelerates across the country...",
        contentHindi: "‡§¶‡•á‡§∂ ‡§≠‡§∞ ‡§Æ‡•á‡§Ç 5G ‡§®‡•á‡§ü‡§µ‡§∞‡•ç‡§ï ‡§ï‡§æ ‡§µ‡§ø‡§∏‡•ç‡§§‡§æ‡§∞ ‡§§‡•á‡§ú‡•Ä ‡§∏‡•á ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à‡•§ ‡§á‡§∏‡§∏‡•á ‡§á‡§Ç‡§ü‡§∞‡§®‡•á‡§ü ‡§ï‡•Ä ‡§∞‡§´‡•ç‡§§‡§æ‡§∞ ‡§Æ‡•á‡§Ç ‡§ï‡§æ‡§´‡•Ä ‡§∏‡•Å‡§ß‡§æ‡§∞ ‡§¶‡•á‡§ñ‡§®‡•á ‡§ï‡•ã ‡§Æ‡§ø‡§≤ ‡§∞‡§π‡§æ ‡§π‡•à‡•§",
        excerpt: "Internet speed improvements nationwide...",
        excerptHindi: "‡§¶‡•á‡§∂ ‡§≠‡§∞ ‡§Æ‡•á‡§Ç 5G ‡§®‡•á‡§ü‡§µ‡§∞‡•ç‡§ï ‡§ï‡§æ ‡§µ‡§ø‡§∏‡•ç‡§§‡§æ‡§∞ ‡§§‡•á‡§ú‡•Ä ‡§∏‡•á ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à‡•§ ‡§á‡§∏‡§∏‡•á ‡§á‡§Ç‡§ü‡§∞‡§®‡•á‡§ü ‡§ï‡•Ä ‡§∞‡§´‡•ç‡§§‡§æ‡§∞ ‡§Æ‡•á‡§Ç ‡§ï‡§æ‡§´‡•Ä ‡§∏‡•Å‡§ß‡§æ‡§∞ ‡§¶‡•á‡§ñ‡§®‡•á ‡§ï‡•ã ‡§Æ‡§ø‡§≤ ‡§∞‡§π‡§æ ‡§π‡•à‡•§",
        imageUrl: "https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150",
        categoryId: 8,
        isBreaking: false,
        isTrending: false,
        publishedAt: new Date(Date.now() - 8 * 60 * 60 * 1000) // 8 hours ago
      },
      {
        title: "Stock Market Surges 200 Points",
        titleHindi: "‡§∂‡•á‡§Ø‡§∞ ‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§Æ‡•á‡§Ç ‡§§‡•á‡§ú‡•Ä ‡§ú‡§æ‡§∞‡•Ä, ‡§∏‡•á‡§Ç‡§∏‡•á‡§ï‡•ç‡§∏ 200 ‡§Ö‡§Ç‡§ï ‡§â‡§õ‡§≤‡§æ",
        content: "Market opens with bullish momentum...",
        contentHindi: "‡§Ü‡§ú ‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§ï‡•Ä ‡§∂‡•Å‡§∞‡•Å‡§Ü‡§§ ‡§§‡•á‡§ú‡•Ä ‡§∏‡•á ‡§π‡•Å‡§à‡•§ ‡§¨‡•à‡§Ç‡§ï‡§ø‡§Ç‡§ó ‡§î‡§∞ IT ‡§∂‡•á‡§Ø‡§∞‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§ñ‡§æ‡§∏‡•Ä ‡§ñ‡§∞‡•Ä‡§¶‡§æ‡§∞‡•Ä ‡§¶‡•á‡§ñ‡•Ä ‡§ó‡§à ‡§π‡•à‡•§",
        excerpt: "Banking and IT stocks see heavy buying...",
        excerptHindi: "‡§Ü‡§ú ‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§ï‡•Ä ‡§∂‡•Å‡§∞‡•Å‡§Ü‡§§ ‡§§‡•á‡§ú‡•Ä ‡§∏‡•á ‡§π‡•Å‡§à‡•§ ‡§¨‡•à‡§Ç‡§ï‡§ø‡§Ç‡§ó ‡§î‡§∞ IT ‡§∂‡•á‡§Ø‡§∞‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§ñ‡§æ‡§∏‡•Ä ‡§ñ‡§∞‡•Ä‡§¶‡§æ‡§∞‡•Ä ‡§¶‡•á‡§ñ‡•Ä ‡§ó‡§à ‡§π‡•à‡•§",
        imageUrl: "https://images.unsplash.com/photo-1611974789855-9c2a0a7236a3?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150",
        categoryId: 5,
        isBreaking: false,
        isTrending: true,
        publishedAt: new Date(Date.now() - 10 * 60 * 60 * 1000) // 10 hours ago
      },
      {
        title: "Bollywood Star's New Film Trailer Released",
        titleHindi: "‡§¨‡•â‡§≤‡•Ä‡§µ‡•Å‡§° ‡§∏‡•ç‡§ü‡§æ‡§∞ ‡§ï‡•Ä ‡§®‡§à ‡§´‡§ø‡§≤‡•ç‡§Æ ‡§ï‡§æ ‡§ü‡•ç‡§∞‡•á‡§≤‡§∞ ‡§∞‡§ø‡§≤‡•Ä‡§ú, ‡§´‡•à‡§Ç‡§∏ ‡§Æ‡•á‡§Ç ‡§â‡§§‡•ç‡§∏‡§æ‡§π",
        content: "Most awaited film trailer of the year...",
        contentHindi: "‡§∏‡§æ‡§≤ ‡§ï‡•Ä ‡§∏‡§¨‡§∏‡•á ‡§™‡•ç‡§∞‡§§‡•Ä‡§ï‡•ç‡§∑‡§ø‡§§ ‡§´‡§ø‡§≤‡•ç‡§Æ ‡§ï‡§æ ‡§ü‡•ç‡§∞‡•á‡§≤‡§∞ ‡§Ü‡§ú ‡§∞‡§ø‡§≤‡•Ä‡§ú ‡§π‡•Å‡§Ü‡•§ ‡§∏‡•ã‡§∂‡§≤ ‡§Æ‡•Ä‡§°‡§ø‡§Ø‡§æ ‡§™‡§∞ ‡§á‡§∏‡•á ‡§≤‡•á‡§ï‡§∞ ‡§ú‡§¨‡§∞‡§¶‡§∏‡•ç‡§§ ‡§¨‡§ú‡§ú ‡§π‡•à‡•§",
        excerpt: "Social media buzzes with excitement...",
        excerptHindi: "‡§∏‡§æ‡§≤ ‡§ï‡•Ä ‡§∏‡§¨‡§∏‡•á ‡§™‡•ç‡§∞‡§§‡•Ä‡§ï‡•ç‡§∑‡§ø‡§§ ‡§´‡§ø‡§≤‡•ç‡§Æ ‡§ï‡§æ ‡§ü‡•ç‡§∞‡•á‡§≤‡§∞ ‡§Ü‡§ú ‡§∞‡§ø‡§≤‡•Ä‡§ú ‡§π‡•Å‡§Ü‡•§ ‡§∏‡•ã‡§∂‡§≤ ‡§Æ‡•Ä‡§°‡§ø‡§Ø‡§æ ‡§™‡§∞ ‡§á‡§∏‡•á ‡§≤‡•á‡§ï‡§∞ ‡§ú‡§¨‡§∞‡§¶‡§∏‡•ç‡§§ ‡§¨‡§ú‡§ú ‡§π‡•à‡•§",
        imageUrl: "https://images.unsplash.com/photo-1489599797989-340a36f2b89f?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150",
        categoryId: 9,
        isBreaking: false,
        isTrending: false,
        publishedAt: new Date(Date.now() - 12 * 60 * 60 * 1000) // 12 hours ago
      },
      {
        title: "Weather Department Issues Heavy Rain Warning",
        titleHindi: "‡§Æ‡•å‡§∏‡§Æ ‡§µ‡§ø‡§≠‡§æ‡§ó ‡§®‡•á ‡§ú‡§æ‡§∞‡•Ä ‡§ï‡•Ä ‡§ö‡•á‡§§‡§æ‡§µ‡§®‡•Ä, ‡§Ü‡§ú ‡§∞‡§æ‡§§ ‡§≠‡§æ‡§∞‡•Ä ‡§¨‡§æ‡§∞‡§ø‡§∂ ‡§ï‡•Ä ‡§∏‡§Ç‡§≠‡§æ‡§µ‡§®‡§æ",
        content: "Northern states expected to receive heavy rainfall...",
        contentHindi: "‡§â‡§§‡•ç‡§§‡§∞ ‡§≠‡§æ‡§∞‡§§ ‡§ï‡•á ‡§ï‡§à ‡§∞‡§æ‡§ú‡•ç‡§Ø‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§Ü‡§ú ‡§∞‡§æ‡§§ ‡§∏‡•á ‡§≠‡§æ‡§∞‡•Ä ‡§¨‡§æ‡§∞‡§ø‡§∂ ‡§π‡•ã‡§®‡•á ‡§ï‡•Ä ‡§∏‡§Ç‡§≠‡§æ‡§µ‡§®‡§æ ‡§π‡•à‡•§ ‡§≤‡•ã‡§ó‡•ã‡§Ç ‡§ï‡•ã ‡§∏‡§æ‡§µ‡§ß‡§æ‡§® ‡§∞‡§π‡§®‡•á ‡§ï‡•Ä ‡§∏‡§≤‡§æ‡§π ‡§¶‡•Ä ‡§ó‡§à ‡§π‡•à‡•§",
        excerpt: "People advised to stay cautious...",
        excerptHindi: "‡§â‡§§‡•ç‡§§‡§∞ ‡§≠‡§æ‡§∞‡§§ ‡§ï‡•á ‡§ï‡§à ‡§∞‡§æ‡§ú‡•ç‡§Ø‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§Ü‡§ú ‡§∞‡§æ‡§§ ‡§∏‡•á ‡§≠‡§æ‡§∞‡•Ä ‡§¨‡§æ‡§∞‡§ø‡§∂ ‡§π‡•ã‡§®‡•á ‡§ï‡•Ä ‡§∏‡§Ç‡§≠‡§æ‡§µ‡§®‡§æ ‡§π‡•à‡•§ ‡§≤‡•ã‡§ó‡•ã‡§Ç ‡§ï‡•ã ‡§∏‡§æ‡§µ‡§ß‡§æ‡§® ‡§∞‡§π‡§®‡•á ‡§ï‡•Ä ‡§∏‡§≤‡§æ‡§π ‡§¶‡•Ä ‡§ó‡§à ‡§π‡•à‡•§",
        imageUrl: "https://images.unsplash.com/photo-1519904981063-b0cf448d479e?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150",
        categoryId: 2,
        isBreaking: false,
        isTrending: false,
        publishedAt: new Date(Date.now() - 24 * 60 * 60 * 1000) // 1 day ago
      },
      {
        title: "New Education Policy Changes Exam Pattern",
        titleHindi: "‡§®‡§à ‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ ‡§®‡•Ä‡§§‡§ø ‡§ï‡•á ‡§§‡§π‡§§ ‡§¨‡§¶‡§≤‡•á‡§ó‡§æ ‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§™‡•à‡§ü‡§∞‡•ç‡§®, ‡§õ‡§æ‡§§‡•ç‡§∞‡•ã‡§Ç ‡§ï‡•ã ‡§Æ‡§ø‡§≤‡•á‡§ó‡§æ ‡§´‡§æ‡§Ø‡§¶‡§æ",
        content: "Education ministry prepares new exam policy draft...",
        contentHindi: "‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ ‡§Æ‡§Ç‡§§‡•ç‡§∞‡§æ‡§≤‡§Ø ‡§®‡•á ‡§®‡§à ‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§®‡•Ä‡§§‡§ø ‡§ï‡§æ ‡§Æ‡§∏‡•å‡§¶‡§æ ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§ï‡§ø‡§Ø‡§æ ‡§π‡•à‡•§ ‡§á‡§∏‡§∏‡•á ‡§õ‡§æ‡§§‡•ç‡§∞‡•ã‡§Ç ‡§™‡§∞ ‡§™‡§¢‡§º‡§æ‡§à ‡§ï‡§æ ‡§¨‡•ã‡§ù ‡§ï‡§Æ ‡§π‡•ã‡§ó‡§æ‡•§",
        excerpt: "Reduces academic burden on students...",
        excerptHindi: "‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ ‡§Æ‡§Ç‡§§‡•ç‡§∞‡§æ‡§≤‡§Ø ‡§®‡•á ‡§®‡§à ‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§®‡•Ä‡§§‡§ø ‡§ï‡§æ ‡§Æ‡§∏‡•å‡§¶‡§æ ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§ï‡§ø‡§Ø‡§æ ‡§π‡•à‡•§ ‡§á‡§∏‡§∏‡•á ‡§õ‡§æ‡§§‡•ç‡§∞‡•ã‡§Ç ‡§™‡§∞ ‡§™‡§¢‡§º‡§æ‡§à ‡§ï‡§æ ‡§¨‡•ã‡§ù ‡§ï‡§Æ ‡§π‡•ã‡§ó‡§æ‡•§",
        imageUrl: "https://images.unsplash.com/photo-1503676260728-1c00da094a0b?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150",
        categoryId: 13,
        isBreaking: false,
        isTrending: false,
        publishedAt: new Date(Date.now() - 24 * 60 * 60 * 1000) // 1 day ago
      }
    ];

    articlesData.forEach(article => {
      const id = this.currentArticleId++;
      this.articles.set(id, { ...article, id, createdAt: new Date() });
    });
  }

  async getUser(id: number): Promise<User | undefined> {
    return this.users.get(id);
  }

  async getUserByUsername(username: string): Promise<User | undefined> {
    return Array.from(this.users.values()).find(
      (user) => user.username === username,
    );
  }

  async createUser(insertUser: InsertUser): Promise<User> {
    const id = this.currentUserId++;
    const user: User = { ...insertUser, id };
    this.users.set(id, user);
    return user;
  }

  async getCategories(): Promise<Category[]> {
    return Array.from(this.categories.values());
  }

  async createCategory(insertCategory: InsertCategory): Promise<Category> {
    const id = this.currentCategoryId++;
    const category: Category = { ...insertCategory, id };
    this.categories.set(id, category);
    return category;
  }

  async getArticles(limit = 10, offset = 0, categoryId?: number): Promise<Article[]> {
    let articles = Array.from(this.articles.values());
    
    if (categoryId) {
      articles = articles.filter(article => article.categoryId === categoryId);
    }
    
    // Sort by published date, newest first
    articles.sort((a, b) => new Date(b.publishedAt!).getTime() - new Date(a.publishedAt!).getTime());
    
    return articles.slice(offset, offset + limit);
  }

  async getArticleById(id: number): Promise<Article | undefined> {
    return this.articles.get(id);
  }

  async getTrendingArticles(limit = 5): Promise<Article[]> {
    const articles = Array.from(this.articles.values())
      .filter(article => article.isTrending)
      .sort((a, b) => new Date(b.publishedAt!).getTime() - new Date(a.publishedAt!).getTime());
    
    return articles.slice(0, limit);
  }

  async createArticle(insertArticle: InsertArticle): Promise<Article> {
    const id = this.currentArticleId++;
    const article: Article = { 
      ...insertArticle, 
      id, 
      createdAt: new Date(),
      publishedAt: new Date()
    };
    this.articles.set(id, article);
    return article;
  }

  async getBreakingNews(): Promise<BreakingNews[]> {
    return Array.from(this.breakingNewsItems.values())
      .filter(news => news.isActive)
      .sort((a, b) => new Date(b.createdAt!).getTime() - new Date(a.createdAt!).getTime());
  }

  async createBreakingNews(insertBreakingNews: InsertBreakingNews): Promise<BreakingNews> {
    const id = this.currentBreakingNewsId++;
    const news: BreakingNews = { 
      ...insertBreakingNews, 
      id, 
      createdAt: new Date()
    };
    this.breakingNewsItems.set(id, news);
    return news;
  }
}

export const storage = new MemStorage();
